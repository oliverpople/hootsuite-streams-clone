'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DEFAULT_CONFIG = undefined;
exports.wait = wait;

var _react = require('react');

var React = _interopRequireWildcard(_react);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var DEFAULT_CONFIG = exports.DEFAULT_CONFIG = {
  interval: 50,
  timeout: 2000,
  timeoutMessage: 'Timed out.'
};
function wait(wrapper, validatorFn) {
  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_CONFIG;

  var interval = config.interval || DEFAULT_CONFIG.interval;
  var timeout = config.timeout || DEFAULT_CONFIG.timeout;

  return new Promise(function (resolve, reject) {
    var retries = timeout / interval;

    var intervalInstance = void 0;

    intervalInstance = setInterval(function () {
      if (validatorFn(wrapper) === true) {
        clearInterval(intervalInstance);
        resolve();
      } else {
        retries -= 1;

        if (retries < 0) {
          clearInterval(intervalInstance);
          reject(config.timeoutMessage || DEFAULT_CONFIG.timeoutMessage);
        }
      }
    }, interval);
  });
}